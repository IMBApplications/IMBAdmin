<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TeamSpeak 3 PHP Framework: API Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>API Documentation </h1>  </div>
</div>
<div class="contents">
<h3 class="version">1.1.4-beta </h3><h2><a class="anchor" id="welcome_sec"></a>
Introduction</h2>
<h3><a class="anchor" id="welcome1"></a>
What is the TS3 PHP Framework?</h3>
<p>Initially released in January 2010, the TS3 PHP Framework is a powerful, open source, object-oriented framework implemented in PHP 5 and licensed under the GNU General Public License. It's based on simplicity and a rigorously tested agile codebase. Extend the functionality of your servers with scripts or create powerful web applications to manage all features of your TeamSpeak 3 Server instances.</p>
<p>Tested. Thoroughly. Enterprise-ready and built with agile methods, the TS3 PHP Framework has been unit-tested from the start to ensure that all code remains stable and easy for you to extend, re-test with your extensions, and further maintain.</p>
<h3><a class="anchor" id="welcome2"></a>
Why should I use the TS3 PHP Framework rather than other PHP libraries?</h3>
<p>The TS3 PHP Framework is a is a modern use-at-will framework that provides individual components to communicate with the TeamSpeak 3 Server.</p>
<p>There are lots of arguments for the TS3 PHP Framework in comparison with other PHP based libraries. It is the most dynamic and feature-rich piece of software in its class. In addition, it's the only PHP library that parses the data spit out of the ServerQuery interface correctly.</p>
<h2><a class="anchor" id="sysreqs_sec"></a>
Requirements</h2>
<p>The TS3 PHP Framework currently supports PHP 5.2.1 or later, but we strongly recommend the most current release of PHP for critical security and performance enhancements. If you want to create a web application using the TS3 PHP Framework, you need a PHP 5 interpreter with a web server configured to handle PHP scripts correctly.</p>
<p>Note that the majority of TS3 PHP Framework development and deployment is done on Apache, so there is more community experience and testing performed on Apache than on other web servers.</p>
<h2><a class="anchor" id="feature_sec"></a>
Features</h2>
<p>Features of the TS3 PHP Framework include:</p>
<ul>
<li>Fully object-oriented PHP 5 and E_STRICT compliant components</li>
<li>Access to all TeamSpeak 3 Server features via ServerQuery</li>
<li>Integrated full featured and customizable TSViewer interfaces</li>
<li>Full support for file transfers to up- and /or download custom icons and other stuff</li>
<li>Powerful error handling capablities using exceptions and customizable error messages</li>
<li>Query mechanisms for several official services such as the blacklist and auto-update servers</li>
<li>Dynamic signal slots for event based scripting</li>
<li>...</li>
</ul>
<h2><a class="anchor" id="example_sec"></a>
Usage Examples</h2>
<h3><a class="anchor" id="example1"></a>
1. Kick all Clients from a Virtual Server</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server, authenticate and quickly spawn an object for the virtual server on port 9987</span>
   $ts3_VirtualServer = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/?server_port=9987&quot;</span>);

   <span class="comment">// query clientlist from virtual server</span>
   $arr_ClientList = $ts3_VirtualServer-&gt;clientList();

   <span class="comment">// kick all clients online with a single command</span>
   $ts3_VirtualServer-&gt;clientKick($arr_ClientList, <a class="code" href="class_team_speak3.html#ae9df1f0980b1d3e9638b3a8084cc5234" title="5: kick client from server">TeamSpeak3::KICK_SERVER</a>, <span class="stringliteral">&quot;evil kick XD&quot;</span>);
</pre></div><h3><a class="anchor" id="example2"></a>
2. Modify the Settings of each Virtual Server</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server, authenticate and quickly spawn an object for the server instance</span>
   $ts3_ServerInstance = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/?use_offline_as_virtual=1&quot;</span>);

   <span class="comment">// walk through list of virtual servers</span>
   <span class="keywordflow">foreach</span>($ts3_ServerInstance as $ts3_VirtualServer)
   {
     <span class="comment">// modify the virtual servers hostbanner URL only</span>
     $ts3_VirtualServer[<span class="stringliteral">&quot;virtualserver_hostbanner_gfx_url&quot;</span>] = <span class="stringliteral">&quot;http://www.example.com/banners/banner01_468x60.jpg&quot;</span>;

     <span class="comment">// modify multiple virtual server properties at once</span>
     $ts3_VirtualServer-&gt;modify(
       <span class="stringliteral">&quot;virtualserver_hostbutton_tooltip&quot;</span> =&gt; <span class="stringliteral">&quot;My Company&quot;</span>,
       <span class="stringliteral">&quot;virtualserver_hostbutton_url&quot;</span>     =&gt; <span class="stringliteral">&quot;http://www.example.com&quot;</span>,
       <span class="stringliteral">&quot;virtualserver_hostbutton_gfx_url&quot;</span> =&gt; <span class="stringliteral">&quot;http://www.example.com/buttons/button01_24x24.jpg&quot;</span>,
     );
   }
</pre></div><h3><a class="anchor" id="example3"></a>
3. Modify the Permissions of Admins on each Virtual Server</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server, authenticate and quickly spawn an object for the server instance</span>
   $ts3_ServerInstance = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/?use_offline_as_virtual=1&quot;</span>);

   <span class="comment">// walk through list of virtual servers</span>
   <span class="keywordflow">foreach</span>($ts3_ServerInstance as $ts3_VirtualServer)
   {
     <span class="comment">// identify the most powerful group on the virtual server</span>
     $ts3_ServerGroup = $ts3_VirtualServer-&gt;serverGroupIdentify();

     <span class="comment">// assign a new permission</span>
     $ts3_ServerGroup-&gt;permAssign(<span class="stringliteral">&quot;b_virtualserver_modify_hostbanner&quot;</span>, TRUE);

     <span class="comment">// revoke an existing permission</span>
     $ts3_ServerGroup-&gt;permRemove(<span class="stringliteral">&quot;b_virtualserver_modify_maxclients&quot;</span>);
   }
</pre></div><h3><a class="anchor" id="example4"></a>
4. Create a new Virtual Server</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server and authenticate</span>
   $ts3_ServerInstance = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/&quot;</span>);

   <span class="comment">// create a virtual server and get its ID</span>
   $new_sid = $ts3_ServerInstance-&gt;serverCreate(
     <span class="stringliteral">&quot;virtualserver_name&quot;</span>               =&gt; <span class="stringliteral">&quot;My TeamSpeak 3 Server&quot;</span>,
     <span class="stringliteral">&quot;virtualserver_maxclients&quot;</span>         =&gt; 64,
     <span class="stringliteral">&quot;virtualserver_hostbutton_tooltip&quot;</span> =&gt; <span class="stringliteral">&quot;My Company&quot;</span>,
     <span class="stringliteral">&quot;virtualserver_hostbutton_url&quot;</span>     =&gt; <span class="stringliteral">&quot;http://www.example.com&quot;</span>,
     <span class="stringliteral">&quot;virtualserver_hostbutton_gfx_url&quot;</span> =&gt; <span class="stringliteral">&quot;http://www.example.com/buttons/button01_24x24.jpg&quot;</span>,
   );
</pre></div><h3><a class="anchor" id="example5"></a>
5. Create a hierarchical Channel Stucture</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server, authenticate and quickly spawn an object for the virtual server on port 9987</span>
   $ts3_VirtualServer = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/?server_port=9987&quot;</span>);

   <span class="comment">// create a top-level channel and get its ID</span>
   $top_cid = $ts3_VirtualServer-&gt;channelCreate(
     <span class="stringliteral">&quot;channel_name&quot;</span>           =&gt; <span class="stringliteral">&quot;My Channel&quot;</span>,
     <span class="stringliteral">&quot;channel_topic&quot;</span>          =&gt; <span class="stringliteral">&quot;This is a top-level channel&quot;</span>,
     <span class="stringliteral">&quot;channel_codec&quot;</span>          =&gt; <a class="code" href="class_team_speak3.html#a7e144effeaf513a660467a0dadd1ae97" title="1: speex wideband (mono, 16bit, 16kHz)">TeamSpeak3::CODEC_SPEEX_WIDEBAND</a>,
     <span class="stringliteral">&quot;channel_flag_permanent&quot;</span> =&gt; TRUE,
   );

   <span class="comment">// create a sub-level channel and get its ID</span>
   $sub_cid = $ts3_VirtualServer-&gt;channelCreate(
     <span class="stringliteral">&quot;channel_name&quot;</span>           =&gt; <span class="stringliteral">&quot;My Sub-Channel&quot;</span>,
     <span class="stringliteral">&quot;channel_topic&quot;</span>          =&gt; <span class="stringliteral">&quot;This is a sub-level channel&quot;</span>,
     <span class="stringliteral">&quot;channel_codec&quot;</span>          =&gt; <a class="code" href="class_team_speak3.html#a73cb8b928682f11db10d5f4bf92c579d" title="0: speex narrowband (mono, 16bit, 8kHz)">TeamSpeak3::CODEC_SPEEX_NARROWBAND</a>,
     <span class="stringliteral">&quot;channel_flag_permanent&quot;</span> =&gt; TRUE,
     <span class="stringliteral">&quot;cpid&quot;</span>                   =&gt; $top_cid,
   );
</pre></div><h3><a class="anchor" id="example6"></a>
6. Send a Text Message to outdated Clients</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server, authenticate and quickly spawn an object for the virtual server on port 9987</span>
   $ts3_VirtualServer = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/?server_port=9987&quot;</span>);

   <span class="comment">// connect to default update server</span>
   $ts3_UpdateServer = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;update&quot;</span>);

   <span class="comment">// walk through list of clients on virtual server</span>
   <span class="keywordflow">foreach</span>($ts3_VirtualServer-&gt;clientList() as $ts3_Client)
   {
     <span class="comment">// skip query clients</span>
     <span class="keywordflow">if</span>($ts3_Client[<span class="stringliteral">&quot;client_type&quot;</span>]) <span class="keywordflow">continue</span>;

     <span class="comment">// send test message if client build is outdated</span>
     <span class="keywordflow">if</span>($ts3_Client-&gt;getRev() &lt; $ts3_UpdateServer-&gt;getRev())
     {
       $ts3_Client-&gt;message(<span class="stringliteral">&quot;[COLOR=red]your client is [B]outdated[/B]... update now![/COLOR]&quot;</span>);
     }
   }
</pre></div><h3><a class="anchor" id="example7"></a>
7. Check if the Server Instance is Outdated or Blacklisted</h3>
<div class="fragment"><pre class="fragment">   <span class="comment">// connect to local server and authenticate</span>
   $ts3_ServerInstance = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;serverquery://username:password@127.0.0.1:10011/&quot;</span>);

   <span class="comment">// connect to default update server</span>
   $ts3_UpdateServer = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;update&quot;</span>);

   <span class="comment">// send global text message if the server is outdated</span>
   <span class="keywordflow">if</span>($ts3_ServerInstance-&gt;version(<span class="stringliteral">&quot;build&quot;</span>) &lt; $ts3_UpdateServer-&gt;getServerRev())
   {
     $ts3_ServerInstance-&gt;message(<span class="stringliteral">&quot;[COLOR=red]your server is [B]outdated[/B]... update now![/COLOR]&quot;</span>);
   }

   <span class="comment">// connect to default blacklist server</span>
   $ts3_BlacklistServer = <a class="code" href="class_team_speak3.html#aed403cdb559cae556a94a0d9823bcaf4" title="Factory for TeamSpeak3_Adapter_Abstract classes.">TeamSpeak3::factory</a>(<span class="stringliteral">&quot;blacklist&quot;</span>);

   <span class="comment">// send global text message if the server is blacklisted</span>
   <span class="keywordflow">if</span>($ts3_BlacklistServer-&gt;isBlacklisted($ts3_ServerInstance))
   {
     $ts3_ServerInstance-&gt;message(<span class="stringliteral">&quot;[COLOR=red]your server is [B]blacklisted[/B]... disconnect now![/COLOR]&quot;</span>);
   }
</pre></div><p>Speed up new development and reduce maintenance costs by using the TS3 PHP Framework! </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Feb 5 2011 22:41:05 for TeamSpeak 3 PHP Framework by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
